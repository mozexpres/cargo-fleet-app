{% extends "base.html" %}

{% block content %}
<h2>Lista de curse</h2>

<a class="btn" href="{{ url_for('adauga_cursa') }}">Adaugă cursă</a>

<div class="filters">
  <form method="get" action="{{ url_for('lista_curse') }}">
    <label>Status:</label>
    <select name="status">
      <option value="Toate">Toate</option>
      <option value="Neplanificată" {% if status_curent == 'Neplanificată' %}selected{% endif %}>Neplanificată</option>
      <option value="Planificată" {% if status_curent == 'Planificată' %}selected{% endif %}>Planificată</option>
      <option value="În curs" {% if status_curent == 'În curs' %}selected{% endif %}>În curs</option>
      <option value="Finalizată" {% if status_curent == 'Finalizată' %}selected{% endif %}>Finalizată</option>
      <option value="Anulată" {% if status_curent == 'Anulată' %}selected{% endif %}>Anulată</option>
    </select>

    <label>Dată de la:</label>
    <input type="date" name="d1" value="{{ d1 }}">

    <label>până la:</label>
    <input type="date" name="d2" value="{{ d2 }}">

    <button type="submit">Filtrează</button>
  </form>
</div>

<p><strong>Total sume (filtru curent):</strong> {{ "%.2f"|format(total) }}</p>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Loc încărcare</th>
      <th>Loc descărcare</th>
      <th>Data/ora încărcare</th>
      <th>Data/ora descărcare</th>
      <th>Paleți schimb</th>
      <th>Nr paleți</th>
      <th>Firmă</th>
      <th>Nr auto</th>
      <th>Preț</th>
      <th>Status</th>
      <th>Obs</th>
      <th>Acțiuni</th>
    </tr>
  </thead>
  <tbody>
    {% for c in curse %}
    <tr>
      <td>{{ c.id }}</td>
      <td>{{ c.loc_inc }}</td>
      <td>{{ c.loc_desc }}</td>
      <td>{{ c.data_inc }}</td>
      <td>{{ c.data_desc }}</td>
      <td>{{ c.paleti }}</td>
      <td>{{ c.nr_paleti }}</td>
      <td>{{ c.firma }}</td>
      <td>{{ c.nr_auto }}</td>
      <td>{{ "%.2f"|format(c.pret) }}</td>
      <td>{{ c.status }}</td>
      <td>{{ c.obs }}</td>
      <td>
        <a href="{{ url_for('editeaza_cursa', cursa_id=c.id) }}">Edit</a> |
        <a href="{{ url_for('sterge_cursa', cursa_id=c.id) }}" onclick="return confirm('Sigur ștergi?');">Șterge</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
